{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}KimiMatch{% endblock %}</title>
  
  <link rel="stylesheet" href="{% static 'style.css' %}">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">
  
</head>
<body class="role-{{ user_type | default:'guest' }}">

  <div class="main-container"> 
    
    <header>
      <h1><a href="/">KimiMatch</a></h1>
      <nav>
        {% if user.is_authenticated %}
          <div class="hamburger-icon" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </div>

        {% else %}
          <a href="{% url 'accounts:login' %}">ログイン</a>
          <a href="{% url 'accounts:signup_type_select' %}" style="margin-left: 15px;">新規登録</a>
        {% endif %}
      </nav>

      {% if user.is_authenticated %}
      <div id="nav-menu" class="nav-menu">
        <div class="nav-close" onclick="toggleMenu()">×</div>
        <ul>
          <li><a href="{% url 'accounts:dashboard' %}">メインメニュー(お知らせ)</a></li>

          {% if user.student %}
            <li><a href="{% url 'accounts:my_page' %}">マイページ</a></li>
            <li><a href="{% url 'companies:list' %}">企業を探す</a></li>
            <li><a href="{% url 'accounts:favorite_list' %}">お気に入り企業</a></li>
            <li><a href="{% url 'chat:chat_list' %}">チャット一覧</a></li>
          
          {% elif user.teacher %}
            <li><a href="{% url 'accounts:my_page' %}">マイページ</a></li>
            <li><a href="{% url 'accounts:teacher_student_list' %}">担当学生一覧</a></li>
            <li><a href="{% url 'companies:list' %}">企業を探す</a></li>
            <li><a href="{% url 'chat:chat_list' %}">チャット一覧</a></li>

          {% elif user.companyrepresentative %}
            <li><a href="{% url 'accounts:my_page' %}">マイページ</a></li>
            <li><a href="{% url 'accounts:company_student_list' %}">学生を検索</a></li>
            <li><a href="{% url 'companies:scout_list' %}">スカウト済み学生</a></li>
            <li><a href="{% url 'chat:chat_list' %}">チャット一覧</a></li>
            
          {% elif user.is_superuser %}
            <li><a href="/admin/">管理サイト</a></li>
          {% endif %}
          
          <hr>
          <li><a href="{% url 'accounts:logout' %}" style="color: #d9534f;">ログアウト</a></li>
        </ul>
      </div>
      <div id="nav-overlay" class="nav-overlay" onclick="toggleMenu()"></div>
      {% endif %}

    </header>
    
    <main>
      {% block content %}{% endblock %}
    </main>
    
    <footer>
      <p style="margin: 0;">&copy; 2025 Eチーム</p>
    </footer>
    
  </div>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('nav-menu');
      const overlay = document.getElementById('nav-overlay');
      if (menu) {
        menu.classList.toggle('active');
        overlay.classList.toggle('active');
      }
    }
  </script>
</body>
</html>