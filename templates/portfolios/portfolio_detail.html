{% extends "base.html" %}

{% block title %}{{ portfolio.title }} - ä½œå“ç®¡ç†{% endblock %}

{% block content %}
<div class="page-container">
  <div class="profile-card">

    <h2>{{ portfolio.title }}</h2>
    
    <p class="portfolio-description">{{ portfolio.description | linebreaksbr }}</p>

    <div>
      <a href="{% url 'portfolios:update' portfolio.pk %}?next={% url 'portfolios:detail' portfolio.pk %}" class="btn btn-edit">
        ã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ã‚’ç·¨é›†
      </a>
      <a href="{% url 'portfolios:delete' portfolio.pk %}" class="btn btn-delete">
        ã“ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚’å‰Šé™¤
      </a>
    </div>

    {% if portfolio.teacher_comment %}
      <div class="teacher-comment-portfolio">
        <strong>
          æ•™å“¡ã‚³ãƒ¡ãƒ³ãƒˆ
          {% if portfolio.commenting_teacher %}
          <span>({{ portfolio.commenting_teacher.full_name }} å…ˆç”Ÿ)</span>
          {% endif %}
        </strong>
        <p>{{ portfolio.teacher_comment }}</p>
      </div>
    {% endif %}

    <hr>
    
    <h3>æˆæœç‰©ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ï¼‰</h3>
    
    {% if items %}
      <ul class="file-list">
        {% for item in items %}
          <li>
            <a href="{{ item.file.url }}" target="_blank">
              ğŸ“„ {{ item.file.name }}
            </a>
            <form action="{% url 'portfolios:delete_item' item.pk %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <button type="submit" class="btn btn-delete" style="font-size: 0.8em;">[å‰Šé™¤]</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p style="padding-left: 10px;">ï¼ˆã¾ã ä½œå“ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰</p>
    {% endif %}

    <hr>

    <h4>æ–°ã—ã„ä½œå“ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h4>

    <p style="font-size: 0.9em; color: #666; margin-bottom: 15px;">
      â€» ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æå‡ºã™ã‚‹å ´åˆã¯ã€ãƒ•ã‚©ãƒ«ãƒ€ã‚’ <strong>ZIPãƒ•ã‚¡ã‚¤ãƒ«</strong> ã«åœ§ç¸®ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚<br>
      â€» ä¼ç”»æ›¸ã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ç”»ã¯ PDF ã‚„ JPG ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã§ã™ã€‚
    </p>
    
    <form action="{% url 'portfolios:add_item' portfolio.pk %}" 
          method="post" 
          enctype="multipart/form-data"
          class="upload-form">
      
      {% csrf_token %}
      
      {{ item_form.as_p }}
      
      <button type="submit">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>
    </form>

    <hr>
    
    <a href="{% url 'accounts:my_page' %}" class="back-link">â† ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªä¸€è¦§ï¼‰ã«æˆ»ã‚‹</a>

  </div>
</div>
{% endblock %}